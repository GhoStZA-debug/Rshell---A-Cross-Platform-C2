import{a as k,u as I,d as R,_ as S}from"./f5f6aa45.js";/* empty css        *//* empty css        */import{H as x,ay as C,_ as E,r as l,l as U,m as N,p as d,V as a,P as t,u as v,a9 as P,T,az as B,aA as L}from"./95bbca75.js";import{a as _,d as A,N as F,O as q,v as K,P as $,ae as z,Z as H}from"./3325456c.js";import{U as M}from"./d456fb9d.js";const h=i=>(B("data-v-6abdc3a9"),i=i(),L(),i),O={class:"login-wrap"},Z={class:"ms-login"},j=h(()=>d("div",{class:"ms-title"},"Rshell",-1)),D={class:"login-btn"},G=h(()=>d("div",{class:"copyright"},[d("span",null,"https://github.com/Rubby2001/Rshell---A-Cross-Platform-C2")],-1)),J=x({__name:"LoginView",setup(i){const w=C(),o=E({username:"",password:""}),y={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},c=k(),r=I(),p=l(),f=m=>{m&&m.validate(s=>{if(s)M.login(o).then(e=>{if(e.data.code==200){_.success("登录成功");const u=c.defaultList[e.data.data.permissions===1?"admin":"user"];e.data.data.permissions,c.handleSet(u),r.setToken(e.data.data.token),r.setPermiss(e.data.data.permissions),r.setRefresh(e.data.data.refresh),e.data.data.permissions===1?r.setRoles("超级管理员"):r.setRoles("普通用户"),r.setUserName(e.data.data.username),w.push("/Clients")}else _.error(e.data.username)});else return _.error("请输入账号或密码"),!1})};return l(!1),l([""]),l(""),l(""),R().clearTags(),(m,s)=>{const e=A,u=F,g=q,V=K,b=$;return U(),N("div",O,[d("div",Z,[j,a(b,{model:o,rules:y,ref_key:"login",ref:p,class:"ms-content"},{default:t(()=>[a(g,{prop:"username"},{default:t(()=>[a(u,{modelValue:o.username,"onUpdate:modelValue":s[0]||(s[0]=n=>o.username=n),placeholder:"用户名"},{prepend:t(()=>[a(e,null,{default:t(()=>[a(v(z))]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(g,{prop:"password"},{default:t(()=>[a(u,{type:"password",placeholder:"密码",modelValue:o.password,"onUpdate:modelValue":s[1]||(s[1]=n=>o.password=n),onKeyup:s[2]||(s[2]=P(n=>f(p.value),["enter"]))},{prepend:t(()=>[a(e,null,{default:t(()=>[a(v(H))]),_:1})]),_:1},8,["modelValue"])]),_:1}),d("div",D,[a(V,{type:"primary",onClick:s[3]||(s[3]=n=>f(p.value))},{default:t(()=>[T("登录")]),_:1})])]),_:1},8,["model"])]),G])}}});const te=S(J,[["__scopeId","data-v-6abdc3a9"]]);export{te as default};
